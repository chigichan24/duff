# History Log

## [2026-02-22] Project Start
### User Request:
ブラウザで動くgit diff viewerを作成したいです。実装のためのTODOリストを作成してください。
（中略：要件詳細）

### Response:
実装のためのTODOリストを提案しました。
1. プロジェクト基盤の構築
2. バックエンド API の実装
3. フロントエンド：レイアウトの実装
4. リアルタイム・ポーリング機能の実装
5. ブラッシュアップ・検証

### User Instruction:
お願いします。実装を進めて。

## [2026-02-22] Implementation Complete
### Completed Features:
- **Backend (Express + Simple-Git):**
  - リポジトリの登録・削除・一覧取得 API。
  - Git status（ブランチ、変更ファイル）取得 API。
  - Git diff（Side-by-Side 用 Raw データ）取得 API。
- **Frontend (React + Vite + Diff2Html):**
  - 1:4 の分割ペインレイアウト。
  - 左ペイン：リポジトリ一覧、変更通知バッジ、ブランチ名表示、追加/削除 UI。
  - 右ペイン：GitHub 風 Side-by-Side Diff 表示、ファイル一覧、リアクティブ検索窓。
  - リアルタイム更新：アクティブなリポジトリは設定した秒数（デフォルト 30s）で更新。非アクティブは 1 分ごとに更新。
  - 設定：ポーリング間隔を UI から調整可能。
- **Project Structure:**
  - `npm run dev` でサーバーとクライアントを同時起動可能。

## [2026-02-22] Refinement
- **Backend Improvement:**
  - リポジトリ登録時に有効な Git リポジトリであるかを確認するバリデーションを追加。
- **Git Management:**
  - プロジェクトルートに `.gitignore` を作成し、`node_modules` やビルド成果物、環境変数を管理対象外に設定。
  - `server/repositories.json` を `.gitignore` に追加。

## [2026-02-22] UI/UX Improvement
- **Resizable Sidebar:** マウスドラッグで左ペインの幅を調整可能に。
- **Flexible Diff View:** 横スクロールを最小限にするため、Diff 行の自動折り返しを適用。
- **Advanced Polling Settings:**
  - アクティブなリポジトリ（詳細表示中）の更新間隔を個別に設定可能。
  - バックグラウンドなリポジトリ（リスト表示中）の更新間隔を個別に設定可能。
- **Bug Fix:** 
  - リポジトリの ID 生成に MD5 ハッシュを採用し、同じディレクトリ階層にある複数のリポジトリを正しく登録できない問題を修正。
  - フロントエンドのポーリング処理がリポジトリ更新のたびにリセットされる問題を useRef を使用して修正。
- **Branding:**
  - ゴルフの絵文字（⛳️）をアプリのロゴおよびブラウザのファビコンに採用。
- **Reordering:**
  - ドラッグ＆ドロップ（@hello-pangea/dnd）によるリポジトリリストの並び替え機能を実装。
  - バックエンドに並び順を永続化するための API を追加。
- **Fix:** React StrictMode 環境下でドラッグ＆ドロップが正常にレンダリングされない問題を StrictModeDroppable を導入して修正。
